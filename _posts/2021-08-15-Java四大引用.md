---
layout: post
title: Java四大引用
date: 2021-08-15
tags: 安卓
---

## SoftReference

**将单元测试的虚拟机设置改为 堆内存10m，堆内存限制10m，打印GC**    

```Java
@Test
    public void testSoftReference(){
        User user = new User(1, "Ray");
        SoftReference<User> userSoftRef = new SoftReference<>(user);
        user = null;
        System.out.println("软引用中的对象：" + userSoftRef.get());
        System.gc();
        System.out.println("After gc");
        System.out.println("软引用中的对象：" + userSoftRef.get());

        //向堆中填充数据，导致OOM
        List<byte[]> list = new LinkedList<>();
        try {
            for (int i = 0; i < 100; i++){
                System.out.println("for========"+userSoftRef.get());
                list.add(new byte[1024*1024*1]);
            }
        }catch (Throwable e){
            System.out.println("Exception======"+userSoftRef.get());
        }
    }
```


















-------------
