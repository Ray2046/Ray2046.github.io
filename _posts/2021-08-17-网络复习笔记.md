---
layout: post
title: 网络复习笔记
date: 2021-08-17
tags: 计算机网络
---

## 网络层次划分
```
OSI 七层模型（理论） <------>  TCP/IP 四层模型（实际）    
      ·                              ·
    应用层                          
    表示层                          应用层
    会话层
      ·                              ·
    传输层                          传输层
      ·                              ·
    网络层                          网络层
      ·                              ·
    数据链路层                      网络接口层
    物理层
      ·                              ·
```

## TCP协议的三次握手和四次挥手
### 建立连接，三次握手      
* 第一次客户端发送SYN，服务端接收，服务端确认客户端的**发送能力**OK。
* 第二次服务端发送SYN+ACK, 客户端接收，客户端确认服务端的**接收能力**和**发送能力**都OK。
* 第三次客户端发送ACK，服务端接收，服务端确认客户端的**接收能力**OK。

### 断开连接，四次挥手
* 多一次是因为要确认 两端都没有要发送的数据了。


## Http协议

### 请求报文格式
* GET方式没有请求体body
* POST方式有content-length,content-type,请求体内的参数 汉字要 URLencode转码。
* socket HttpUrl -> 域名DNS解析

### 响应报文格式
* 响应体长度content-length
* transfer-encoding: chunked  ，数据量大，分块编码


## https

* HTTP Over TLS, 运行在TLS协议上的安全HTTP协议  在http之上 加了一层加密 使用TLS
* TLS 是 SSL 的升级版
* SSL握手    目的，   过程（明文）  因此重点就是  怎么在不安全的网络中安全的进行秘钥交换
    - [ ] RSA算法交换秘钥 ，  DH算法， ECDH算法
    - [ ] RSA步骤：
      * 1.客户端给出协议版本号、一个`随机数(Random1)`、以及客户端支持的加密方法。
      * 2.服务端确认使用的加密方法，并给出数字证书、以及`随机数(Random2)`。
      * 3.客户端确认数字证书有效性，生成一个新的`随机数(premaster secret)`，并使用数字证书中的公钥，利用RSA算法加密这个随机数，发给服务端。
      * 4.服务端使用自己的私钥，获取客户端发来的`随机数(premaster secret)`。
      * 5.客户端和服务端根据约定的加密方法，使用前面的三个随机数，生成`对话秘钥(master secret)`，用来加密接下来的整个对话过程。




























-----------
